#!/usr/bin/env python
# coding: utf-8

# # REPORTE 1
# 
# ##### Nombres y apellidos: Roxana Jimena Rodriguez Pilco
# ##### C√≥digo: 20200373

# ## Lectura

# En primer lugar, las vacas flacas en la economia peruana es un texto escrito por Oscar Dancourt, el cual tiene como objetivo describir el choque externo adverso que atraves√≥ la econom√≠a peruana y en consecuencia el impacto recesivo e inflacionario que sufri√≥ durante el periodo de 2014-15. Para as√≠, a partir de este contexto analizar las pol√≠ticas monetarias y fiscales que fueron aplicadas en respuesta a este choque y finalmente concluir enumerando los posibles retos macroecon√≥micos que el gobierno entrante de Pedro Pablo Kuczynski Godard tendr√≠a que afrontar. 
# De modo que, tomando en cuenta los lineamientos del art√≠culo se puede determinar que la pregunta de investigaci√≥n que con la que se alinea es: ¬øCu√°les fueron los efectos recesivos e inflacionarios del choque externo adverso en la econom√≠a peruana durante el periodo 2014-15?
# De la misma manera, podr√≠amos establecer algunas preguntas secundarias que guiaron el desarrollo del art√≠culo, como por ejemplo: ¬øQu√© retos macroecon√≥micos tendr√° el gobierno de Pedro Pablo Kuczynski Godard? O ¬øcu√°les fueron las pol√≠ticas monetarias y fiscales que se aplicaron para contrarrestar los efectos del choque externo adverso?
# 
# En segundo lugar, la investigaci√≥n de Dancourt podemos decir que presenta un enfoque cuantitativo, pues si evaluamos el art√≠culo se puede reconocer el dise√±o de investigaci√≥n, los datos que utiliza de referencia, el procesamiento de los datos para realizar las gr√°ficas, las cuales dinamizan la presentaci√≥n de su investigaci√≥n, evidencian los procedimientos inferenciales y estad√≠sticos y dado que las fuentes de recojo de datos son instituciones leg√≠timas y confiables como el BCRP y otras bases de datos, podemos decir que estos respaldan el art√≠culo y su objetivo. 
# 
# De manera que, este enfoque cuantitativo presenta tanto fortalezas como debilidades para responder a la pregunta central de la investigaci√≥n. Por un lado, entre las fortalezas del enfoque se encuentra que por medio de los gr√°ficos estad√≠sticos se denota un acercamiento objetivo a la realidad del contexto peruano durante dicho periodo, pues muestran la relaci√≥n entre variables macroecon√≥micas importantes y su relaci√≥n con el detrimento de la econom√≠a peruana durante 2014-2015. Asimismo, permiten comparar esta realidad con fen√≥menos econ√≥micos sucedidos en periodos anteriores como las 2 crisis de a√±os pasados, lo que determina la veracidad de la hip√≥tesis de investigaci√≥n.  Adem√°s, en base a estas comparaciones se puede formar patrones comunes sobre el efecto del componente externo en la econom√≠a peruana, espec√≠ficamente referido a 2 situaciones: las fluctuaciones de precios de materias primas, las contracciones del cr√©dito extranjero, la reducci√≥n de la inversi√≥n privada, entre otros factores influencian la entrada a crisis inflacionarias en el Per√∫. Por ende, este tipo de enfoque nos permite tener un mayor campo de acci√≥n en el cual generalizar y usar herramientas m√°s propicias para determinar los efectos de este tipo de fen√≥meno econ√≥mico y la funcionalidad de las politicas aplicadas para contrarrestarlo. Igualmente, otra fortaleza de este enfoque es que a partir de las recurrencias encontradas por medio de los datos y gr√°ficos estad√≠sticos con referencia a las pol√≠ticas econ√≥micas y las crisis inflacionarias y recesiones en el Per√∫, se puede establecer patrones comunes y generalizaciones con respecto a estas crisis y las mejores pol√≠ticas fiscales y monetarias a utilizar. Por tanto, se pueden predecir los hechos que se dar√≠an a continuaci√≥n de un fen√≥meno pol√≠tico o anticiparse a este. Situaci√≥n que se evidencia con las predicciones de los retos macroecon√≥micos que afrontar√≠a el expresidente Kuczynski.
# 
# Por otro lado, se sabe que este enfoque tambi√©n tiene sus debilidades, entre ellas, el hecho de que dado el tipo de enfoque, la investigaci√≥n no haya sido lo suficientemente detallada como para considerar las particularidades de la realidad peruana en su totalidad, pues si bien evalu√≥ el efecto de los fen√≥menos externos en los periodos de recesi√≥n e inflaci√≥n de la econom√≠a peruana, no los explic√≥ a profundidad ni tom√≥ en cuenta los factores internos que podr√≠an intensificarlos. Adem√°s, dado el hecho de que utiliz√≥ grandes bases de datos, aunque puede ser considerado una fortaleza por la significancia y confiabilidad que le dan a la investigaci√≥n, tambi√©n es una debilidad, pues al usar muchos datos se pierden de vista las peculiaridades de los sectores de la poblaci√≥n que pudieron verse afectados de manera diferente por este periodo de choque externo durante 2014-2015.
# 
# En tercer lugar, con respecto a la contribuci√≥n de este art√≠culo de investigaci√≥n, se puede decir que fueron muchas, pero principalmente que nos ayuda a tener una mayor comprensi√≥n de los fen√≥menos macroecon√≥micos peruanos acontecidos en las 2 √∫ltimas d√©cadas. As√≠ tambi√©n, permite mejorar el proceso de toma de decisiones y acci√≥n con respecto a las pol√≠ticas econ√≥micas a realizar durante estos procesos econ√≥micos, por ejemplo, se manifest√≥ que una pol√≠tica de aumento de la tasa de inter√©s o la reducci√≥n del gasto del gobierno solo contribuye a la intensificaci√≥n de estos problemas macroecon√≥micos.
# 
# Adem√°s, otra de sus contribuciones es que desde una perspectiva realista identifica las acciones ineficientes del Estado, por ejemplo, la venta excesiva de los d√≥lares estatales, lo cual comprometer√≠a la pol√≠tica monetaria a futuro, ya que estamos hablando de un sistema bancario completamente dolarizado, motivo por el cual podr√≠a ver m√°s afectada su estabilidad financiera por un choque externo. Del mismo modo, a partir de sus gr√°ficos y datos, el autor determina que una de las debilidades econ√≥micas m√°s grandes del pa√≠s es que es demasiado dependiente con respecto a las exportaciones, las cuales condicionan el equilibrio econ√≥mico y la √©poca de bonanza en el pa√≠s.
# 
# En suma, el autor desde un enfoque cuantitativo y realista realiza una cr√≠tica estatal y analiza las variables externas que afectan la econom√≠a peruana y la orillan a un periodo de vacas flacas, lo que da pie a resaltar el importante papel central del Estado en un proceso de dinamizaci√≥n interna de la econom√≠a. Pues, dependiendo de sus acciones con respecto a las fluctuaciones de la tasa de inter√©s y las expectativas con respecto a este se puede producir una variaci√≥n en la inversi√≥n y una fluctuaci√≥n de la econom√≠a. As√≠ pues, a partir de su an√°lisis, cr√≠tica y posible plan de intervenci√≥n estatal a largo plazo, Dancourt, brinda una visi√≥n concisa de la realidad peruana a partir de las crisis de inflaci√≥n y recesi√≥n en el Per√∫ desde el modelo Keynesiano y al mismo tiempo brinda ciertas medidas para una diversificaci√≥n de la econom√≠a que ser√≠an de ayuda para el siguiente gobierno de turno y los posteriores a este.
# 
# Finalmente, los pr√≥ximos pasos espec√≠ficos para avanzar con la pregunta de investigaci√≥n planteada en el primer apartado ser√≠an que para investigaciones futuras parta de esta cr√≠tica estatal, el papel central del Estado y los factores internos que colaboran y hasta podr√≠an haber intensificado los efectos de este choque externo adverso en la econom√≠a durante el periodo establecido y hasta la actualidad.  De manera que, se debe seguir evaluando el modelo de desarrollo del pa√≠s, ya que, tal como menciona Dancourt(2013), como un factor interno, este modelo econ√≥mico tiene cierta influencia en los periodos de recesi√≥n, pues en base a esto podemos determinar factores como la dependencia del pa√≠s a las exportaciones, otros factores externos u otras debilidades estatales. As√≠, una vez obtenido mayor conocimiento de este modelo se puede manifestar y aplicar mejores pol√≠ticas econ√≥micas tanto fiscales como monetarias que contrarresten estos fen√≥menos y deficiencias como la dolarizaci√≥n del estado en un futuro (Rossini et alt, 2016).

# ## C√≥digo en Python

# In[1]:


import ipywidgets as widgets
import matplotlib.pyplot as plt
import numpy as np
import sympy as sy
from sympy import *
import pandas as pd
from causalgraphicalmodels import CausalGraphicalModel


# #### 1.Derive y explique la funci√≥n de demanda de Consumo. Replique el gr√°fico siguiente:

# ##### a) Derivaci√≥n de la funci√≥n de demanda de consumo:
# La funci√≥n base de la demanda de Consumo es:
# 
# $$ C = C_0 + bYd  $$
# 
# siendo: 
# 
# $$T=YT$$
# 
# y, 
# 
# $$Yd= Y-T$$ 
# 
# por ende, 
# 
# $$ Yd=(1 - t)Y $$
# 
# Entonces, al reemplazar valores, la funci√≥n resultar√≠a: 
# 
# $$ C = Co + b(1-t)Y $$
# 
# ##### b) Explicaci√≥n de la funci√≥n
# 
# La funci√≥n de demanda de consumo implica que las familias toman decisiones de gasto y ahorro. Adem√°s, se sabe que la suma de salarios de los trabajadores y de los beneficios de los propietarios del stock de capital es igual al Ingreso Agregado (Y) y parte de este ingreso (Y) se entrega al Estado como tributaci√≥n (T), con lo que queda se decide consumir y ahorrar.
# 
# La funci√≥n demanda de consumo: $C = C_0 + b(1-t)Y$, representa como parte del ingreso disponible se utiliza en los gastos de consumo. Adem√°s, en cuanto a los valores,$C_0$ es el nivel b√°sico de consumo, es decir, el consumo aut√≥nomo, y $b$
# representa la propensi√≥n marginal($PMgc$) a consumir, es decir, el cambio en el consumo por unidad de cambio en el ingreso disponible (matem√°ticamente, se sabe que es la derivada de la funci√≥n consumo con respecto al ingreso
# disponible). Esta se encuentra entre cero y uno, 0 < ùëè < 1. 
# 
# ##### c) R√©plica de gr√°fico de funci√≥n de demanda de Consumo:

# In[2]:


# Par√°metros

Y_size = 100 

Co = 35
b = 0.8
t = 0.3

Y = np.arange(Y_size)

# Ecuaci√≥n de la curva del ingreso de equilibrio

def C(Co, b, t, Y):
    C = Co + b*(1-t)*Y
    return C

C = C(Co, b, t, Y)


# In[3]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(Y)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0, 130)
custom_ylim = (20, 130)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(Y, C, label = "Consumo", color = "C2") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(80, 95, '$PMgC = ‚ñ≥C/‚ñ≥Y^d = b = 0.5$', fontsize = 13, color = 'black')


# T√≠tulo y leyenda
ax.set(title="Funci√≥n de demanda de Consumo", xlabel= '$Y^d$', ylabel= 'C')
ax.legend() #mostrar leyenda

plt.show()


# #### 2.Derive y explique la funci√≥n de Inversi√≥n. Replique el gr√°fico siguiente:

# ##### a) Explicaci√≥n de la funci√≥n de demanda de Inversi√≥n
# 
# Los gastos de inversi√≥n son aquellos que aumentan el stock de capital y, por lo tanto, la producci√≥n potencial o
# producci√≥n de largo plazo de la econom√≠a. Estos pueden ser representados por medio de la funci√≥n de Demanda de Inversi√≥n: 
# 
# $$I= I_0-hr$$
# 
# donde $I_0$ representa la inversi√≥n aut√≥noma (valor fijo),$h$ representa la sensibilidad de un inversionista ante la tasa de inter√©s real y $r$ representa la tasa de inter√©s real. 
# 
# Adem√°s, los valores de $r$ y $h$ se encuentran en un rango de 0 a 1.Entonces, hay una relaci√≥n inversa entre la tasa de inter√©s real $r$ y la funci√≥n de demanda de Inversi√≥n $I$ y la inversi√≥n aut√≥noma $I_0$ es el componente aut√≥nomo que depende b√°sicamente de las expectativas de los inversionistas.
# 
# ##### b)Gr√°fico de la funci√≥n de Inversi√≥n:

# In[4]:


#Par√°metros
Io = 40
h = 0.7

r = np.arange(start = 0.01, stop = 1, step =0.01)  
r

# Ecuaci√≥n de la curva del ingreso de equilibrio

def I(Io, h, r):
    I = Io - h*r
    return I

I = I(Io, h, r)


# In[5]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(r)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0.1, 1.25)
custom_ylim = (39.1, 40.2)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(r, I, label = "Inversi√≥n", color = "C6") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(0.8, 39.5, '$I = Io - hr$', fontsize = 12.5, color = 'blue')


# T√≠tulo y leyenda
ax.set(title="Funci√≥n de demanda de Inversi√≥n", xlabel= 'r', ylabel= 'I')
ax.legend() #mostrar leyenda

plt.show()


# #### 3.¬øCu√°les son los supuestos del modelo Ingreso-Gasto Keynesiano?
# El modelo supone 4 cosas: Primero, el nivel de precios est√° fijo. Segundo, el nivel del producto ($Y$) se adapta a
# los cambios en la demanda agregada $DA$.Tercero, la tasa de inter√©s est√° determinada fuera del
# modelo Ingreso-Gasto, se da en el mercado monetario. Cuarto, el modelo Ingreso-Gasto Keynesiano es un modelo de corto plazo. 

# ### 4.A partir de las ecuaciones

# ##### a) Encuentre el nivel de Ingreso de equilibrio Ye
# 
# Para determinar el ingreso de equilibrio ($Y^e$), el ingreso agregado ($Y$) debe ser igual a la demanda agregada($DA$), es decir, $Y=DA$. As√≠, a partir de esta condici√≥n de equilibrio se obtiene la ecuaci√≥n del ingreso de equilibrio ($Y^e$) a corto plazo.

# Entonces, definimos la ecuaci√≥n de la Demanda Agregada:
# 
# $$ DA = (C_0 + bYd + I_0 + G_0 + X_0 - hr) - mYd $$
# 
# Luego, al reemplazar las ecuaciones del modelo (consumo, inversion, exportaciones, importaciones, gasto del gobierno e ingreso disponible) y realizar algunas operaciones algebraicas obtenemos:
# 
# $$ DA = (C_0 + b(1-t)Y + I_0 + G_0 + X_0 - hr) - m(1-t)Y $$
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + (b - m)(1 - t)Y $$
# 
# De forma corta:
# 
# $$ DA = Œ±_0 + Œ±_1Y $$
# 
# Donde $ Œ±_0 = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ Œ±_1 = (b - m)(1 - t) $ es la pendiente de la funci√≥n
# 
# Ahora, considerando la condici√≥n de equilibrio $Y = DA$, la ecuaci√≥n del ingreso de equilibrio es:
# 
# $$ Y = (C_0 + I_0 + G_0 + X_0 - hr) + (b - m)*(1 - t)Y $$
# 
# $$ Y =  \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 

# ##### b)Replique el siguiente gr√°fico con todas descripciones encima de las rectas.

# In[6]:


# Par√°metros

Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuaci√≥n de la curva del ingreso de equilibrio

def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[7]:


# Recta de 45¬∞

a = 2.5 

def L_45(a, Y):
    L_45 = a*Y
    return L_45

L_45 = L_45(a, Y)


# In[8]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_IS_K, label = "DA", color = "C6") #Demanda agregada
ax.plot(L_45, color = "C8") #L√≠nea de 45¬∫

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# L√≠neas punteadas punto de equilibrio
plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=176, xmin= 0, xmax= 0.7, linestyle = ":", color = "grey")

plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 152, '$Œ±_o$', fontsize = 15, color = 'black')
    # l√≠nea 45¬∫
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = 'C8')
    # ecuaciones
plt.text(87, 203, '$DA = Œ±_0 + Œ±_1 Y$', fontsize = 11.5, color = '#3D59AB')
plt.text(80, 165, '$Œ±_1 = (b-m)(1-t)$', fontsize = 11.5, color = 'green')
plt.text(73, 125, '$Œ±_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'green')

plt.text(92, 192, '$‚Üì$', fontsize = 13, color = 'black')
plt.text(85, 135, '$‚Üë$', fontsize = 13, color = 'black')

# T√≠tulo y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# ### 5.Est√°tica comparativa en el modelo de Ingreso-Gasto keynesiano
# 
# ##### a) Analice una Pol√≠tica Fiscal Expansiva con aumento del Gasto del Gobierno ($ŒîG > 0$). El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.

# - Intuici√≥n: 
# 
# $$ ‚ÜëGo ‚Üí ‚ÜëG ‚Üí ‚ÜëDA ‚Üí DA > Y ‚Üí ‚ÜëY $$

# - Matem√°ticamente: $‚àÜG_0 > 0  ‚Üí  ¬ø‚àÜY?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ‚àÜY = k (‚àÜC_0 + ‚àÜI_0 + ‚àÜG_0 + ‚àÜX_0 - ‚àÜhr) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$‚àÜC_0 = ‚àÜI_0 = ‚àÜX_0 = ‚àÜh = ‚àÜr = 0$$
# 
# $$ ‚àÜY = k (‚àÜG_0) $$
# 
# Sabiendo que $‚àÜG_0 > 0 $ y que $k > 0$, la multiplicaci√≥n de un n√∫mero positivo con otro positivo, finalmente dar√° otro positivo:
# 
# $$ ‚àÜY = (+)(+) $$
# $$ ‚àÜY > 0 $$
# 
# - Gr√°fico

# In[9]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

    # Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Se define el par√°metro cambiado
Go = 90

# Generar la ecuaci√≥n con el nuevo par√°metro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[10]:


# Recta de 45¬∞

a = 2.5 

def L_45(a, Y):
    L_45 = a*Y
    return L_45

L_45 = L_45(a, Y)


# In[11]:


# Gr√°fico
#Dimensiones del grafico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_G, label = "DA_G", color = "#EE0078", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 80,  ymin= 0, ymax = 0.78, linestyle = ":", color = "grey")
plt.axhline(y = 200.5, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 134, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 180, '$DA_G$', fontsize = 11.5, color = '#EE0078')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(65, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(85, 0, '$Y_G$', fontsize = 12, color = '#EE0078')
plt.text(73, 45, '$‚Üí$', fontsize = 18, color = 'purple')
plt.text(20, 160, '$‚Üë$', fontsize = 18, color = 'purple')

# T√≠tulo y leyenda
ax.set(title = "Efectos de un aumento del Gasto del Gobierno $(G_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ##### b) Analice una Pol√≠tica fiscal expansiva con una reducci√≥n de la Tasa de Tributaci√≥n ($Œît < 0$). El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.
# - An√°lisis intuitivo: ¬øHay contradicci√≥n?
# 
# $$ t‚Üì ‚Üí Co‚Üë ‚Üí DA‚Üë ‚Üí DA > Y ‚Üí Y‚Üë $$
# 
# $$ t‚Üì ‚Üí M‚Üë ‚Üí DA‚Üì ‚Üí DA < Y ‚Üí Y‚Üì $$
# 
# - An√°lisis matem√°tico: $‚àÜt < 0  ‚Üí  ¬ø‚àÜY?$

# In[12]:


Co, Io, Go, Xo, h, r, b, m, t = symbols('Co Io Go Xo h r b m t')

f = (Co + Io + Go + Xo - h*r)/(1-(b-m)*(1-t))

df_t = diff(f, t)
df_t #‚àÜY/‚àÜt


# Considernado el diferencial de $‚àÜt$:
# 
# $$ \frac{‚àÜY}{‚àÜt} = \frac{(m-b)(Co + Go + Io + Xo - hr)}{(1-(1-t)(b-m)+1)^2} $$
# 
# - Sabiendo que b > m, entonces $(m-b) < 0$
# - Los componentes aut√≥nomos no cambian: $‚àÜC_0 = ‚àÜI_0 = ‚àÜX_0 = ‚àÜh = ‚àÜr = 0$
# - Cualquier n√∫mero elevado al cuadrado ser√° positivo: $ (1-(1-t)(b-m)+1)^2 > 0 $
# 
# Entonces:
# 
# $$ \frac{‚àÜY}{‚àÜt} = \frac{(-)}{(+)} $$
# 
# Dado que $‚àÜt < 0$, la divisi√≥n de dos positivos da otro positivo:
# 
# $$ \frac{‚àÜY}{(-)} = \frac{(-)}{(+)} $$
# 
# $$ ‚àÜY = \frac{(-)(-)}{(+)} $$
# 
# $$ ‚àÜY > 0 $$
# - An√°lisis gr√°fico:

# In[13]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
t_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3 #tasa de tributaci√≥n
r = 0.9

Y = np.arange(t_size)

# Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el par√°metro cambiado
t = 0.01

# Generar la ecuaci√≥n con el nuevo par√°metros
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_t = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[14]:


# Gr√°fico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3c9eff") #curva ORIGINAL
ax.plot(Y, DA_t, label = "DA_t", color = "#7600ee", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.7, linestyle = ":", color = "grey")
plt.axvline(x = 77,  ymin= 0, ymax = 0.75, linestyle = ":", color = "grey")
plt.axhline(y = 192, xmin= 0, xmax = 0.75, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 160, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 200, '$DA_t$', fontsize = 11.5, color = '#7600ee')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(66, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(80, 0, '$Y_t$', fontsize = 12, color = '#7600ee')
plt.text(72, 45, '$‚Üí$', fontsize = 18, color = 'purple')
plt.text(20, 180, '$‚Üë$', fontsize = 18, color = 'purple')

# T√≠tulo y leyenda
ax.set(title = "Efectos de la reducci√≥n de la Tasa de Tributaci√≥n ($t$)", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ### 6.Est√°tica comparativa en el modelo de Ingreso-Gasto keynesiano con Regla Contrac√≠clica.
# Ahora vamos a utilizar un modelo con regla contrac√≠clica. Este tipo de pol√≠tica fiscal hace que los auges y las depresiones no sean muy pronunciados. Se establece como una regla consistente en una variaci√≥n del Gasto ($G$) (La magnitud es exactamente igual que en 5) en sentido contrario a la variaci√≥n del Producto, Y. Uilice las siguientes ecuaciones y responda.

# ##### 6.1) Grafique la Funcion de demanda Agregada y la recta de 45 grados se√±alando los valores de intercepto y pendiente como en el apartado (4).

# In[15]:


# Par√°metros

Y_size = 100 

Co = 35
Io = 40
Go = 70
g = 0.2 #solo valores entre 0-0.4
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuaci√≥n de la curva del ingreso de equilibrio

def DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_C = (Co  + Io + Go + Xo - h*r) + [(b-m)*(1-t)-g]*Y
    return DA_C

DA_Cont = DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[16]:


# Gr√°fico

# Dimensiones del gr√°fico
y_max = np.max(DA_Cont)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_Cont, label = "DA", color = "C9") #Demanda agregada
ax.plot(L_45, color = "blue") #L√≠nea de 45¬∫

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# L√≠neas punteadas punto de equilibrio
plt.axvline(x=64,  ymin= 0, ymax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=161, xmin= 0, xmax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 165, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(65, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 135, '$Œ±_o$', fontsize = 15, color = 'black')
    # l√≠nea 45¬∫
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
    # ecuaciones
plt.text(82, 185, '$DA = Œ±_0 + Œ±_1 Y$', fontsize = 11.5, color = 'C9')
plt.text(75, 151, '$Œ±_1 = [(b-m)(1-t)-g]$', fontsize = 11.5, color = 'black')
plt.text(73, 125, '$Œ±_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'black')

plt.text(87, 175, '$‚Üì$', fontsize = 13, color = 'black')
plt.text(85, 135, '$‚Üë$', fontsize = 13, color = 'black')

# T√≠tulo y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo con regla contrac√≠clica", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# ##### 6.2) Encuentre el nivel de Ingreso de equilibrio $Ye$ 

# Entonces, primero determinamos la ecuaci√≥n de la Demanda Agregada: 
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + ((b - m)(1 - t)-g)Y $$
# 
# De forma corta:
# 
# $$ DA = Œ±_0 + Œ±_1Y $$
# 
# Donde $ Œ±_0 = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ Œ±_1 = ((b - m)(1 - t)-g) $ es la pendiente de la funci√≥n

# Ahora, considerando la condici√≥n de equilibrio $Y = DA$, la ecuaci√≥n del ingreso de equilibrio es:
# 
# $$ Y^e = (C_0 + I_0 + G_0 + X_0 - hr)+((b - m)*(1 - t)-g)Y $$
# 
# $$ Y^e =  \frac{1}{1 - (b - m)(1 - t)+ g} (C_0 + I_0 + G_0 + X_0 - hr) $$

# ##### 6.3) Analice una Pol√≠tica Fiscal Expansiva con aumento del Gasto del Gobierno ($ŒîG_0 > 0$). El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.

# - Intuici√≥n: 
# 
# $$ ‚ÜëGo ‚Üí ‚Üë(G_0-gY) ‚Üí ‚ÜëG ‚Üí ‚ÜëDA ‚Üí DA > Y ‚Üí ‚ÜëY $$

# - Matem√°ticamente: $‚àÜG_0 > 0  ‚Üí  ¬ø‚àÜY?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ‚àÜY = k(‚àÜC_0 + ‚àÜI_0 + ‚àÜG_0 + ‚àÜX_0 - ‚àÜh‚àÜr) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$‚àÜC_0 = ‚àÜI_0 = ‚àÜX_0 = ‚àÜh = ‚àÜr = 0$$
# 
# $$ ‚àÜY = k(‚àÜG_0) $$
# 
# Sabiendo que $‚àÜG_0 > 0 $ y que $k > 0$, entonces la multiplicaci√≥n de 2 n√∫meros positivos dar√° como resultado otro n√∫mero positivo:
# 
# $$ \frac{‚àÜY}{(+)} = (+) $$
# 
# $$ ‚àÜY = (+)(+) $$
# $$ ‚àÜY > 0 $$
# 
# - Gr√°fico 

# In[17]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3

Y = np.arange(Y_size)

    # Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_IS_g = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

    # Definir SOLO el par√°metro cambiado
Go = 90

# Generar la ecuaci√≥n con el nuevo par√°metro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_g = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[18]:


# Gr√°fico
#Dimensiones del grafico
y_max = np.max(DA_IS_g)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(Y, DA_IS_g, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_g, label = "DA_G", color = "#EE0078", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 61.5, ymin= 0, ymax = 0.61, linestyle = ":", color = "grey")
plt.axhline(y = 155, xmin= 0, xmax = 0.61, linestyle = ":", color = "grey")
plt.axvline(x = 70.5,  ymin= 0, ymax = 0.70, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 150, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 180, '$DA_G$', fontsize = 11.5, color = '#EE0078')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(52, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(72, 0, '$Y_G$', fontsize = 12, color = '#EE0078')
plt.text(63, 45, '$‚Üí$', fontsize = 18, color = 'purple')
plt.text(20, 155, '$‚Üë$', fontsize = 18, color = 'purple')

# T√≠tulo y leyenda
ax.set(title = "Efectos del aumento del Gasto del Gobierno $(G_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ##### 6.4) ¬øCu√°l es el papel que juega el parametro $g$ en el multiplicador keynesiano?
# Si tenemos en cuenta la ecuaci√≥n, anteriormente mencionada:
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando que el multiplicador keynesiano es: 
# 
# $$ k = \frac{1}{1 - (b - m)(1 - t)}$$
# 
# El par√°metro $g$ de la regla contrac√≠clica aumenta la magnitud del denominador del multiplicador keynesiano, por ende, reduce el tama√±o del multiplicador keynesiano y al reducir el tama√±o del multiplicador, la pendiente de la Demanda agregada tambi√©n se reduce.

# ##### 6.5) ¬øEl tama√±o del efecto de la politica fiscal encontrado en 6 es el mismo que en el apartado 5?
# Para determinar, esto primero tenemos que establecer que una politica fiscal expansiva con aumento en el gasto, va a tener una relaci√≥n directa entre el gasto de gobierno ($G=G_0$)y la producci√≥n o producto ($Y$), sin embargo, una pol√≠tica fiscal expansiva con aumento en el gasto de gobierno ($G$) y regla contrac√≠clica va a implicar una variacion inversa entre la producci√≥n ($Y$) y el gasto ($G=G_0-gY$). 
# 
# De modo que, si bien en ambos casos (apartado 5 y 6) el gasto aumenta en la misma magnitud, no se puede considerar que el efecto sea el mismo, pues en una pol√≠tica fiscal contrac√≠clica la pendiente de la curva $DA$ se ve reducida y esto lo podemos ver por medio de los gr√°ficos, pues en el apartado 5 la pendiente de la recta $DA$ es m√°s grande (m√°s inclinada) que en el apartado 6.
# 
# Esta diferencia se debe a que el valor del multiplicador keynesiano $k$ se vio reducido por la adici√≥n de $g$ en el denominador. Por consiguiente, si este m√°s peque√±o, el impacto de una pol√≠tica fiscal expansiva ser√° menor cuando se utilice la regla contrac√≠clica (la adici√≥n de $g$). Por eso, la pendiente de la curva de la Demanda Agregada es menor en el apartado 6).
# 
# - As√≠, determino que el tama√±o del efecto de la politica fiscal encontrado en 6 no es el mismo que en el apartado 5. 

# ##### 6.6) Analice una crisis mundial que reduce nuestras exportaciones ($‚àÜX_0 < 0$). El an√°lisis debe ser intuitivo, matem√°tico y gr√°fico.

# - An√°lisis Intuitivo: 
# 
# $$ ‚ÜìXo ‚Üí ‚ÜìX ‚Üí ‚ÜìDA ‚Üí DA < Y ‚Üí ‚ÜìY $$

# - Matem√°ticamente: $‚àÜX_0 < 0  ‚Üí  ¬ø‚àÜY?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ‚àÜY = k(‚àÜC_0 + ‚àÜI_0 + ‚àÜG_0 + ‚àÜX_0 - ‚àÜh‚àÜr) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $G_0$, $h$ ni $r$, entonces: 
# 
# $$‚àÜC_0 = ‚àÜI_0 = ‚àÜG_0 = ‚àÜh = ‚àÜr = 0$$
# 
# $$ ‚àÜY = k(‚àÜX_0) $$
# 
# Sabiendo que $‚àÜX_0 < 0 $ y que $k > 0$ , la multiplicaci√≥n de un n√∫mero positivo con uno negativo dar√° otro negativo:
# 
# $$ \frac{‚àÜY}{(-)} = (+) $$
# 
# $$ ‚àÜY = (-)(+) $$
# $$ ‚àÜY < 0 $$
# - Gr√°fico

# In[19]:


# Curva de ingreso de equilibrio ORIGINAL

# Par√°metros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 20
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3
Y = np.arange(Y_size)

    # Ecuaci√≥n 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + (((b - m)*(1 - t)-g)*Y)
    return DA_K

DA_IS_g = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el par√°metro cambiado Xo
Xo = 4

# Generar la ecuaci√≥n con el nuevo par√°metro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_X = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[20]:


# Gr√°fico
y_max = np.max(DA_IS_g)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_g, label = "DA", color = "#40e0d0") #curva ORIGINAL
ax.plot(Y, DA_X, label = "DA_X", color = "#40a0e0", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #l√≠nea de 45¬∫

# Lineas punteadas
plt.axvline(x = 69.2, ymin= 0, ymax = 0.68, linestyle = ":", color = "grey")
plt.axhline(y = 173.2, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 63,  ymin= 0, ymax = 0.62, linestyle = ":", color = "grey")
plt.axhline(y = 157, xmin= 0, xmax = 0.62, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'blue')
plt.text(0, 125, '$DA_X$', fontsize = 11.5, color = '#40a0e0')
plt.text(6, 4, '$45¬∞$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$‚óù$', fontsize = 30, color = '#404040')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'blue')
plt.text(56, 0, '$Y_X$', fontsize = 12, color = '#40a0e0')
plt.text(64, 100, '$‚Üê$', fontsize = 18, color = 'orange')
plt.text(20, 157, '$‚Üì$', fontsize = 18, color = 'orange')

# T√≠tulo y leyenda
ax.set(title = "Reducci√≥n de las exportaciones $(X_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# In[ ]:




