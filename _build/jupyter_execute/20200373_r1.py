#!/usr/bin/env python
# coding: utf-8

# # REPORTE 1
# 
# ##### Nombres y apellidos: Roxana Jimena Rodriguez Pilco
# ##### Código: 20200373

# ## Lectura

# En primer lugar, las vacas flacas en la economia peruana es un texto escrito por Oscar Dancourt, el cual tiene como objetivo describir el choque externo adverso que atravesó la economía peruana y en consecuencia el impacto recesivo e inflacionario que sufrió durante el periodo de 2014-15. Para así, a partir de este contexto analizar las políticas monetarias y fiscales que fueron aplicadas en respuesta a este choque y finalmente concluir enumerando los posibles retos macroeconómicos que el gobierno entrante de Pedro Pablo Kuczynski Godard tendría que afrontar. 
# De modo que, tomando en cuenta los lineamientos del artículo se puede determinar que la pregunta de investigación que con la que se alinea es: ¿Cuáles fueron los efectos recesivos e inflacionarios del choque externo adverso en la economía peruana durante el periodo 2014-15?
# De la misma manera, podríamos establecer algunas preguntas secundarias que guiaron el desarrollo del artículo, como por ejemplo: ¿Qué retos macroeconómicos tendrá el gobierno de Pedro Pablo Kuczynski Godard? O ¿cuáles fueron las políticas monetarias y fiscales que se aplicaron para contrarrestar los efectos del choque externo adverso?
# 
# En segundo lugar, la investigación de Dancourt podemos decir que presenta un enfoque cuantitativo, pues si evaluamos el artículo se puede reconocer el diseño de investigación, los datos que utiliza de referencia, el procesamiento de los datos para realizar las gráficas, las cuales dinamizan la presentación de su investigación, evidencian los procedimientos inferenciales y estadísticos y dado que las fuentes de recojo de datos son instituciones legítimas y confiables como el BCRP y otras bases de datos, podemos decir que estos respaldan el artículo y su objetivo. 
# 
# De manera que, este enfoque cuantitativo presenta tanto fortalezas como debilidades para responder a la pregunta central de la investigación. Por un lado, entre las fortalezas del enfoque se encuentra que por medio de los gráficos estadísticos se denota un acercamiento objetivo a la realidad del contexto peruano durante dicho periodo, pues muestran la relación entre variables macroeconómicas importantes y su relación con el detrimento de la economía peruana durante 2014-2015. Asimismo, permiten comparar esta realidad con fenómenos económicos sucedidos en periodos anteriores como las 2 crisis de años pasados, lo que determina la veracidad de la hipótesis de investigación.  Además, en base a estas comparaciones se puede formar patrones comunes sobre el efecto del componente externo en la economía peruana, específicamente referido a 2 situaciones: las fluctuaciones de precios de materias primas, las contracciones del crédito extranjero, la reducción de la inversión privada, entre otros factores influencian la entrada a crisis inflacionarias en el Perú. Por ende, este tipo de enfoque nos permite tener un mayor campo de acción en el cual generalizar y usar herramientas más propicias para determinar los efectos de este tipo de fenómeno económico y la funcionalidad de las politicas aplicadas para contrarrestarlo. Igualmente, otra fortaleza de este enfoque es que a partir de las recurrencias encontradas por medio de los datos y gráficos estadísticos con referencia a las políticas económicas y las crisis inflacionarias y recesiones en el Perú, se puede establecer patrones comunes y generalizaciones con respecto a estas crisis y las mejores políticas fiscales y monetarias a utilizar. Por tanto, se pueden predecir los hechos que se darían a continuación de un fenómeno político o anticiparse a este. Situación que se evidencia con las predicciones de los retos macroeconómicos que afrontaría el expresidente Kuczynski.
# 
# Por otro lado, se sabe que este enfoque también tiene sus debilidades, entre ellas, el hecho de que dado el tipo de enfoque, la investigación no haya sido lo suficientemente detallada como para considerar las particularidades de la realidad peruana en su totalidad, pues si bien evaluó el efecto de los fenómenos externos en los periodos de recesión e inflación de la economía peruana, no los explicó a profundidad ni tomó en cuenta los factores internos que podrían intensificarlos. Además, dado el hecho de que utilizó grandes bases de datos, aunque puede ser considerado una fortaleza por la significancia y confiabilidad que le dan a la investigación, también es una debilidad, pues al usar muchos datos se pierden de vista las peculiaridades de los sectores de la población que pudieron verse afectados de manera diferente por este periodo de choque externo durante 2014-2015.
# 
# En tercer lugar, con respecto a la contribución de este artículo de investigación, se puede decir que fueron muchas, pero principalmente que nos ayuda a tener una mayor comprensión de los fenómenos macroeconómicos peruanos acontecidos en las 2 últimas décadas. Así también, permite mejorar el proceso de toma de decisiones y acción con respecto a las políticas económicas a realizar durante estos procesos económicos, por ejemplo, se manifestó que una política de aumento de la tasa de interés o la reducción del gasto del gobierno solo contribuye a la intensificación de estos problemas macroeconómicos.
# 
# Además, otra de sus contribuciones es que desde una perspectiva realista identifica las acciones ineficientes del Estado, por ejemplo, la venta excesiva de los dólares estatales, lo cual comprometería la política monetaria a futuro, ya que estamos hablando de un sistema bancario completamente dolarizado, motivo por el cual podría ver más afectada su estabilidad financiera por un choque externo. Del mismo modo, a partir de sus gráficos y datos, el autor determina que una de las debilidades económicas más grandes del país es que es demasiado dependiente con respecto a las exportaciones, las cuales condicionan el equilibrio económico y la época de bonanza en el país.
# 
# En suma, el autor desde un enfoque cuantitativo y realista realiza una crítica estatal y analiza las variables externas que afectan la economía peruana y la orillan a un periodo de vacas flacas, lo que da pie a resaltar el importante papel central del Estado en un proceso de dinamización interna de la economía. Pues, dependiendo de sus acciones con respecto a las fluctuaciones de la tasa de interés y las expectativas con respecto a este se puede producir una variación en la inversión y una fluctuación de la economía. Así pues, a partir de su análisis, crítica y posible plan de intervención estatal a largo plazo, Dancourt, brinda una visión concisa de la realidad peruana a partir de las crisis de inflación y recesión en el Perú desde el modelo Keynesiano y al mismo tiempo brinda ciertas medidas para una diversificación de la economía que serían de ayuda para el siguiente gobierno de turno y los posteriores a este.
# 
# Finalmente, los próximos pasos específicos para avanzar con la pregunta de investigación planteada en el primer apartado serían que para investigaciones futuras parta de esta crítica estatal, el papel central del Estado y los factores internos que colaboran y hasta podrían haber intensificado los efectos de este choque externo adverso en la economía durante el periodo establecido y hasta la actualidad.  De manera que, se debe seguir evaluando el modelo de desarrollo del país, ya que, tal como menciona Dancourt(2013), como un factor interno, este modelo económico tiene cierta influencia en los periodos de recesión, pues en base a esto podemos determinar factores como la dependencia del país a las exportaciones, otros factores externos u otras debilidades estatales. Así, una vez obtenido mayor conocimiento de este modelo se puede manifestar y aplicar mejores políticas económicas tanto fiscales como monetarias que contrarresten estos fenómenos y deficiencias como la dolarización del estado en un futuro (Rossini et alt, 2016).

# ## Código en Python

# In[1]:


import ipywidgets as widgets
import matplotlib.pyplot as plt
import numpy as np
import sympy as sy
from sympy import *
import pandas as pd
from causalgraphicalmodels import CausalGraphicalModel


# #### 1.Derive y explique la función de demanda de Consumo. Replique el gráfico siguiente:

# ##### a) Derivación de la función de demanda de consumo:
# La función base de la demanda de Consumo es:
# 
# $$ C = C_0 + bYd  $$
# 
# siendo: 
# 
# $$T=YT$$
# 
# y, 
# 
# $$Yd= Y-T$$ 
# 
# por ende, 
# 
# $$ Yd=(1 - t)Y $$
# 
# Entonces, al reemplazar valores, la función resultaría: 
# 
# $$ C = Co + b(1-t)Y $$
# 
# ##### b) Explicación de la función
# 
# La función de demanda de consumo implica que las familias toman decisiones de gasto y ahorro. Además, se sabe que la suma de salarios de los trabajadores y de los beneficios de los propietarios del stock de capital es igual al Ingreso Agregado (Y) y parte de este ingreso (Y) se entrega al Estado como tributación (T), con lo que queda se decide consumir y ahorrar.
# 
# La función demanda de consumo: $C = C_0 + b(1-t)Y$, representa como parte del ingreso disponible se utiliza en los gastos de consumo. Además, en cuanto a los valores,$C_0$ es el nivel básico de consumo, es decir, el consumo autónomo, y $b$
# representa la propensión marginal($PMgc$) a consumir, es decir, el cambio en el consumo por unidad de cambio en el ingreso disponible (matemáticamente, se sabe que es la derivada de la función consumo con respecto al ingreso
# disponible). Esta se encuentra entre cero y uno, 0 < 𝑏 < 1. 
# 
# ##### c) Réplica de gráfico de función de demanda de Consumo:

# In[2]:


# Parámetros

Y_size = 100 

Co = 35
b = 0.8
t = 0.3

Y = np.arange(Y_size)

# Ecuación de la curva del ingreso de equilibrio

def C(Co, b, t, Y):
    C = Co + b*(1-t)*Y
    return C

C = C(Co, b, t, Y)


# In[3]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(Y)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0, 130)
custom_ylim = (20, 130)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(Y, C, label = "Consumo", color = "C2") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(80, 95, '$PMgC = △C/△Y^d = b = 0.5$', fontsize = 13, color = 'black')


# Título y leyenda
ax.set(title="Función de demanda de Consumo", xlabel= '$Y^d$', ylabel= 'C')
ax.legend() #mostrar leyenda

plt.show()


# #### 2.Derive y explique la función de Inversión. Replique el gráfico siguiente:

# ##### a) Explicación de la función de demanda de Inversión
# 
# Los gastos de inversión son aquellos que aumentan el stock de capital y, por lo tanto, la producción potencial o
# producción de largo plazo de la economía. Estos pueden ser representados por medio de la función de Demanda de Inversión: 
# 
# $$I= I_0-hr$$
# 
# donde $I_0$ representa la inversión autónoma (valor fijo),$h$ representa la sensibilidad de un inversionista ante la tasa de interés real y $r$ representa la tasa de interés real. 
# 
# Además, los valores de $r$ y $h$ se encuentran en un rango de 0 a 1.Entonces, hay una relación inversa entre la tasa de interés real $r$ y la función de demanda de Inversión $I$ y la inversión autónoma $I_0$ es el componente autónomo que depende básicamente de las expectativas de los inversionistas.
# 
# ##### b)Gráfico de la función de Inversión:

# In[4]:


#Parámetros
Io = 40
h = 0.7

r = np.arange(start = 0.01, stop = 1, step =0.01)  
r

# Ecuación de la curva del ingreso de equilibrio

def I(Io, h, r):
    I = Io - h*r
    return I

I = I(Io, h, r)


# In[5]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(r)
fig, ax = plt.subplots(figsize=(10, 8))

custom_xlim = (0.1, 1.25)
custom_ylim = (39.1, 40.2)

plt.setp(ax, xlim=custom_xlim, ylim=custom_ylim)


# Curvas a graficar
ax.plot(r, I, label = "Inversión", color = "C6") #Demanda agregada

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Texto agregado
    # punto de equilibrio
plt.text(0.8, 39.5, '$I = Io - hr$', fontsize = 12.5, color = 'blue')


# Título y leyenda
ax.set(title="Función de demanda de Inversión", xlabel= 'r', ylabel= 'I')
ax.legend() #mostrar leyenda

plt.show()


# #### 3.¿Cuáles son los supuestos del modelo Ingreso-Gasto Keynesiano?
# El modelo supone 4 cosas: Primero, el nivel de precios está fijo. Segundo, el nivel del producto ($Y$) se adapta a
# los cambios en la demanda agregada $DA$.Tercero, la tasa de interés está determinada fuera del
# modelo Ingreso-Gasto, se da en el mercado monetario. Cuarto, el modelo Ingreso-Gasto Keynesiano es un modelo de corto plazo. 

# ### 4.A partir de las ecuaciones

# ##### a) Encuentre el nivel de Ingreso de equilibrio Ye
# 
# Para determinar el ingreso de equilibrio ($Y^e$), el ingreso agregado ($Y$) debe ser igual a la demanda agregada($DA$), es decir, $Y=DA$. Así, a partir de esta condición de equilibrio se obtiene la ecuación del ingreso de equilibrio ($Y^e$) a corto plazo.

# Entonces, definimos la ecuación de la Demanda Agregada:
# 
# $$ DA = (C_0 + bYd + I_0 + G_0 + X_0 - hr) - mYd $$
# 
# Luego, al reemplazar las ecuaciones del modelo (consumo, inversion, exportaciones, importaciones, gasto del gobierno e ingreso disponible) y realizar algunas operaciones algebraicas obtenemos:
# 
# $$ DA = (C_0 + b(1-t)Y + I_0 + G_0 + X_0 - hr) - m(1-t)Y $$
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + (b - m)(1 - t)Y $$
# 
# De forma corta:
# 
# $$ DA = α_0 + α_1Y $$
# 
# Donde $ α_0 = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ α_1 = (b - m)(1 - t) $ es la pendiente de la función
# 
# Ahora, considerando la condición de equilibrio $Y = DA$, la ecuación del ingreso de equilibrio es:
# 
# $$ Y = (C_0 + I_0 + G_0 + X_0 - hr) + (b - m)*(1 - t)Y $$
# 
# $$ Y =  \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 

# ##### b)Replique el siguiente gráfico con todas descripciones encima de las rectas.

# In[6]:


# Parámetros

Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuación de la curva del ingreso de equilibrio

def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[7]:


# Recta de 45°

a = 2.5 

def L_45(a, Y):
    L_45 = a*Y
    return L_45

L_45 = L_45(a, Y)


# In[8]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_IS_K, label = "DA", color = "C6") #Demanda agregada
ax.plot(L_45, color = "C8") #Línea de 45º

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Líneas punteadas punto de equilibrio
plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=176, xmin= 0, xmax= 0.7, linestyle = ":", color = "grey")

plt.axvline(x=70.5,  ymin= 0, ymax= 0.69, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 152, '$α_o$', fontsize = 15, color = 'black')
    # línea 45º
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = 'C8')
    # ecuaciones
plt.text(87, 203, '$DA = α_0 + α_1 Y$', fontsize = 11.5, color = '#3D59AB')
plt.text(80, 165, '$α_1 = (b-m)(1-t)$', fontsize = 11.5, color = 'green')
plt.text(73, 125, '$α_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'green')

plt.text(92, 192, '$↓$', fontsize = 13, color = 'black')
plt.text(85, 135, '$↑$', fontsize = 13, color = 'black')

# Título y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# ### 5.Estática comparativa en el modelo de Ingreso-Gasto keynesiano
# 
# ##### a) Analice una Política Fiscal Expansiva con aumento del Gasto del Gobierno ($ΔG > 0$). El análisis debe ser intuitivo, matemático y gráfico.

# - Intuición: 
# 
# $$ ↑Go → ↑G → ↑DA → DA > Y → ↑Y $$

# - Matemáticamente: $∆G_0 > 0  →  ¿∆Y?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t)} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ∆Y = k (∆C_0 + ∆I_0 + ∆G_0 + ∆X_0 - ∆hr) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$∆C_0 = ∆I_0 = ∆X_0 = ∆h = ∆r = 0$$
# 
# $$ ∆Y = k (∆G_0) $$
# 
# Sabiendo que $∆G_0 > 0 $ y que $k > 0$, la multiplicación de un número positivo con otro positivo, finalmente dará otro positivo:
# 
# $$ ∆Y = (+)(+) $$
# $$ ∆Y > 0 $$
# 
# - Gráfico

# In[9]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

    # Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Se define el parámetro cambiado
Go = 90

# Generar la ecuación con el nuevo parámetro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_G = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[10]:


# Recta de 45°

a = 2.5 

def L_45(a, Y):
    L_45 = a*Y
    return L_45

L_45 = L_45(a, Y)


# In[11]:


# Gráfico
#Dimensiones del grafico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_G, label = "DA_G", color = "#EE0078", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 80,  ymin= 0, ymax = 0.78, linestyle = ":", color = "grey")
plt.axhline(y = 200.5, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 134, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 180, '$DA_G$', fontsize = 11.5, color = '#EE0078')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(65, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(85, 0, '$Y_G$', fontsize = 12, color = '#EE0078')
plt.text(73, 45, '$→$', fontsize = 18, color = 'purple')
plt.text(20, 160, '$↑$', fontsize = 18, color = 'purple')

# Título y leyenda
ax.set(title = "Efectos de un aumento del Gasto del Gobierno $(G_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ##### b) Analice una Política fiscal expansiva con una reducción de la Tasa de Tributación ($Δt < 0$). El análisis debe ser intuitivo, matemático y gráfico.
# - Análisis intuitivo: ¿Hay contradicción?
# 
# $$ t↓ → Co↑ → DA↑ → DA > Y → Y↑ $$
# 
# $$ t↓ → M↑ → DA↓ → DA < Y → Y↓ $$
# 
# - Análisis matemático: $∆t < 0  →  ¿∆Y?$

# In[12]:


Co, Io, Go, Xo, h, r, b, m, t = symbols('Co Io Go Xo h r b m t')

f = (Co + Io + Go + Xo - h*r)/(1-(b-m)*(1-t))

df_t = diff(f, t)
df_t #∆Y/∆t


# Considernado el diferencial de $∆t$:
# 
# $$ \frac{∆Y}{∆t} = \frac{(m-b)(Co + Go + Io + Xo - hr)}{(1-(1-t)(b-m)+1)^2} $$
# 
# - Sabiendo que b > m, entonces $(m-b) < 0$
# - Los componentes autónomos no cambian: $∆C_0 = ∆I_0 = ∆X_0 = ∆h = ∆r = 0$
# - Cualquier número elevado al cuadrado será positivo: $ (1-(1-t)(b-m)+1)^2 > 0 $
# 
# Entonces:
# 
# $$ \frac{∆Y}{∆t} = \frac{(-)}{(+)} $$
# 
# Dado que $∆t < 0$, la división de dos positivos da otro positivo:
# 
# $$ \frac{∆Y}{(-)} = \frac{(-)}{(+)} $$
# 
# $$ ∆Y = \frac{(-)(-)}{(+)} $$
# 
# $$ ∆Y > 0 $$
# - Análisis gráfico:

# In[13]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
t_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3 #tasa de tributación
r = 0.9

Y = np.arange(t_size)

# Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_IS_K = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)

#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el parámetro cambiado
t = 0.01

# Generar la ecuación con el nuevo parámetros
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)*Y)
    return DA_K

DA_t = DA_K(Co, Io, Go, Xo, h, r, b, m, t, Y)


# In[14]:


# Gráfico
y_max = np.max(DA_IS_K)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_K, label = "DA", color = "#3c9eff") #curva ORIGINAL
ax.plot(Y, DA_t, label = "DA_t", color = "#7600ee", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 70.5, ymin= 0, ymax = 0.69, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.7, linestyle = ":", color = "grey")
plt.axvline(x = 77,  ymin= 0, ymax = 0.75, linestyle = ":", color = "grey")
plt.axhline(y = 192, xmin= 0, xmax = 0.75, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 160, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 200, '$DA_t$', fontsize = 11.5, color = '#7600ee')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(66, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(80, 0, '$Y_t$', fontsize = 12, color = '#7600ee')
plt.text(72, 45, '$→$', fontsize = 18, color = 'purple')
plt.text(20, 180, '$↑$', fontsize = 18, color = 'purple')

# Título y leyenda
ax.set(title = "Efectos de la reducción de la Tasa de Tributación ($t$)", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ### 6.Estática comparativa en el modelo de Ingreso-Gasto keynesiano con Regla Contracíclica.
# Ahora vamos a utilizar un modelo con regla contracíclica. Este tipo de política fiscal hace que los auges y las depresiones no sean muy pronunciados. Se establece como una regla consistente en una variación del Gasto ($G$) (La magnitud es exactamente igual que en 5) en sentido contrario a la variación del Producto, Y. Uilice las siguientes ecuaciones y responda.

# ##### 6.1) Grafique la Funcion de demanda Agregada y la recta de 45 grados señalando los valores de intercepto y pendiente como en el apartado (4).

# In[15]:


# Parámetros

Y_size = 100 

Co = 35
Io = 40
Go = 70
g = 0.2 #solo valores entre 0-0.4
Xo = 2
h = 0.7
b = 0.8 # b > m
m = 0.2
t = 0.3
r = 0.9

Y = np.arange(Y_size)

# Ecuación de la curva del ingreso de equilibrio

def DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_C = (Co  + Io + Go + Xo - h*r) + [(b-m)*(1-t)-g]*Y
    return DA_C

DA_Cont = DA_C(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[16]:


# Gráfico

# Dimensiones del gráfico
y_max = np.max(DA_Cont)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(DA_Cont, label = "DA", color = "C9") #Demanda agregada
ax.plot(L_45, color = "blue") #Línea de 45º

# Eliminar las cantidades de los ejes
ax.yaxis.set_major_locator(plt.NullLocator())   
ax.xaxis.set_major_locator(plt.NullLocator())

# Líneas punteadas punto de equilibrio
plt.axvline(x=64,  ymin= 0, ymax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=161, xmin= 0, xmax= 0.63, linestyle = ":", color = "grey")
plt.axhline(y=145, xmin= 0, xmax= 1, linestyle = ":", color = "grey")

# Texto agregado
    # punto de equilibrio
plt.text(0, 165, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(65, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(0, 135, '$α_o$', fontsize = 15, color = 'black')
    # línea 45º
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
    # ecuaciones
plt.text(82, 185, '$DA = α_0 + α_1 Y$', fontsize = 11.5, color = 'C9')
plt.text(75, 151, '$α_1 = [(b-m)(1-t)-g]$', fontsize = 11.5, color = 'black')
plt.text(73, 125, '$α_0 = C_o + I_o + G_o + X_o - hr$', fontsize = 11.5, color = 'black')

plt.text(87, 175, '$↓$', fontsize = 13, color = 'black')
plt.text(85, 135, '$↑$', fontsize = 13, color = 'black')

# Título y leyenda
ax.set(title="El ingreso de Equilibrio a Corto Plazo con regla contracíclica", xlabel= r'Y', ylabel= r'DA')
ax.legend() #mostrar leyenda

plt.show()


# ##### 6.2) Encuentre el nivel de Ingreso de equilibrio $Ye$ 

# Entonces, primero determinamos la ecuación de la Demanda Agregada: 
# 
# $$ DA = (C_0 + I_0 + G_0 + X_0 - hr) + ((b - m)(1 - t)-g)Y $$
# 
# De forma corta:
# 
# $$ DA = α_0 + α_1Y $$
# 
# Donde $ α_0 = (C_0 + I_0 + G_0 + X_0 -hr)$ es el intercepto y $ α_1 = ((b - m)(1 - t)-g) $ es la pendiente de la función

# Ahora, considerando la condición de equilibrio $Y = DA$, la ecuación del ingreso de equilibrio es:
# 
# $$ Y^e = (C_0 + I_0 + G_0 + X_0 - hr)+((b - m)*(1 - t)-g)Y $$
# 
# $$ Y^e =  \frac{1}{1 - (b - m)(1 - t)+ g} (C_0 + I_0 + G_0 + X_0 - hr) $$

# ##### 6.3) Analice una Política Fiscal Expansiva con aumento del Gasto del Gobierno ($ΔG_0 > 0$). El análisis debe ser intuitivo, matemático y gráfico.

# - Intuición: 
# 
# $$ ↑Go → ↑(G_0-gY) → ↑G → ↑DA → DA > Y → ↑Y $$

# - Matemáticamente: $∆G_0 > 0  →  ¿∆Y?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ∆Y = k(∆C_0 + ∆I_0 + ∆G_0 + ∆X_0 - ∆h∆r) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $X_0$, $h$ ni $r$, entonces: 
# 
# $$∆C_0 = ∆I_0 = ∆X_0 = ∆h = ∆r = 0$$
# 
# $$ ∆Y = k(∆G_0) $$
# 
# Sabiendo que $∆G_0 > 0 $ y que $k > 0$, entonces la multiplicación de 2 números positivos dará como resultado otro número positivo:
# 
# $$ \frac{∆Y}{(+)} = (+) $$
# 
# $$ ∆Y = (+)(+) $$
# $$ ∆Y > 0 $$
# 
# - Gráfico 

# In[17]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 2
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3

Y = np.arange(Y_size)

    # Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_IS_g = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

    # Definir SOLO el parámetro cambiado
Go = 90

# Generar la ecuación con el nuevo parámetro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_g = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[18]:


# Gráfico
#Dimensiones del grafico
y_max = np.max(DA_IS_g)
fig, ax = plt.subplots(figsize=(10, 8))

# Curvas a graficar
ax.plot(Y, DA_IS_g, label = "DA", color = "#3D59AB") #curva ORIGINAL
ax.plot(Y, DA_g, label = "DA_G", color = "#EE0078", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 61.5, ymin= 0, ymax = 0.61, linestyle = ":", color = "grey")
plt.axhline(y = 155, xmin= 0, xmax = 0.61, linestyle = ":", color = "grey")
plt.axvline(x = 70.5,  ymin= 0, ymax = 0.70, linestyle = ":", color = "grey")
plt.axhline(y = 176, xmin= 0, xmax = 0.78, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 150, '$DA^e$', fontsize = 11.5, color = 'black')
plt.text(0, 180, '$DA_G$', fontsize = 11.5, color = '#EE0078')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(52, 0, '$Y^e$', fontsize = 12, color = 'black')
plt.text(72, 0, '$Y_G$', fontsize = 12, color = '#EE0078')
plt.text(63, 45, '$→$', fontsize = 18, color = 'purple')
plt.text(20, 155, '$↑$', fontsize = 18, color = 'purple')

# Título y leyenda
ax.set(title = "Efectos del aumento del Gasto del Gobierno $(G_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# ##### 6.4) ¿Cuál es el papel que juega el parametro $g$ en el multiplicador keynesiano?
# Si tenemos en cuenta la ecuación, anteriormente mencionada:
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando que el multiplicador keynesiano es: 
# 
# $$ k = \frac{1}{1 - (b - m)(1 - t)}$$
# 
# El parámetro $g$ de la regla contracíclica aumenta la magnitud del denominador del multiplicador keynesiano, por ende, reduce el tamaño del multiplicador keynesiano y al reducir el tamaño del multiplicador, la pendiente de la Demanda agregada también se reduce.

# ##### 6.5) ¿El tamaño del efecto de la politica fiscal encontrado en 6 es el mismo que en el apartado 5?
# Para determinar, esto primero tenemos que establecer que una politica fiscal expansiva con aumento en el gasto, va a tener una relación directa entre el gasto de gobierno ($G=G_0$)y la producción o producto ($Y$), sin embargo, una política fiscal expansiva con aumento en el gasto de gobierno ($G$) y regla contracíclica va a implicar una variacion inversa entre la producción ($Y$) y el gasto ($G=G_0-gY$). 
# 
# De modo que, si bien en ambos casos (apartado 5 y 6) el gasto aumenta en la misma magnitud, no se puede considerar que el efecto sea el mismo, pues en una política fiscal contracíclica la pendiente de la curva $DA$ se ve reducida y esto lo podemos ver por medio de los gráficos, pues en el apartado 5 la pendiente de la recta $DA$ es más grande (más inclinada) que en el apartado 6.
# 
# Esta diferencia se debe a que el valor del multiplicador keynesiano $k$ se vio reducido por la adición de $g$ en el denominador. Por consiguiente, si este más pequeño, el impacto de una política fiscal expansiva será menor cuando se utilice la regla contracíclica (la adición de $g$). Por eso, la pendiente de la curva de la Demanda Agregada es menor en el apartado 6).
# 
# - Así, determino que el tamaño del efecto de la politica fiscal encontrado en 6 no es el mismo que en el apartado 5. 

# ##### 6.6) Analice una crisis mundial que reduce nuestras exportaciones ($∆X_0 < 0$). El análisis debe ser intuitivo, matemático y gráfico.

# - Análisis Intuitivo: 
# 
# $$ ↓Xo → ↓X → ↓DA → DA < Y → ↓Y $$

# - Matemáticamente: $∆X_0 < 0  →  ¿∆Y?$
# 
# $$ Y = \frac{1}{1 - (b - m)(1 - t) + g} (C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# y, considerando el multiplicador keynesiano, $ k > 0 $:
# 
# $$ Y = k(C_0 + I_0 + G_0 + X_0 - hr) $$
# 
# 
# $$ ∆Y = k(∆C_0 + ∆I_0 + ∆G_0 + ∆X_0 - ∆h∆r) $$
# 
# Pero, como no han habido cambios en $C_0$, $I_0$, $G_0$, $h$ ni $r$, entonces: 
# 
# $$∆C_0 = ∆I_0 = ∆G_0 = ∆h = ∆r = 0$$
# 
# $$ ∆Y = k(∆X_0) $$
# 
# Sabiendo que $∆X_0 < 0 $ y que $k > 0$ , la multiplicación de un número positivo con uno negativo dará otro negativo:
# 
# $$ \frac{∆Y}{(-)} = (+) $$
# 
# $$ ∆Y = (-)(+) $$
# $$ ∆Y < 0 $$
# - Gráfico

# In[19]:


# Curva de ingreso de equilibrio ORIGINAL

# Parámetros
Y_size = 100 

Co = 35
Io = 40
Go = 70
Xo = 20
h = 0.7
b = 0.8
m = 0.2
t = 0.3
r = 0.9
g = 0.3
Y = np.arange(Y_size)

    # Ecuación 
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + (((b - m)*(1 - t)-g)*Y)
    return DA_K

DA_IS_g = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


#--------------------------------------------------
# NUEVA curva de ingreso de equilibrio

# Definimos el parámetro cambiado Xo
Xo = 4

# Generar la ecuación con el nuevo parámetro
def DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y):
    DA_K = (Co + Io + Go + Xo - h*r) + ((b - m)*(1 - t)-g)*Y
    return DA_K

DA_X = DA_K(Co, Io, Go, Xo, h, r, b, m, t, g, Y)


# In[20]:


# Gráfico
y_max = np.max(DA_IS_g)
fig, ax = plt.subplots(figsize=(10, 8))


# Curvas a graficar
ax.plot(Y, DA_IS_g, label = "DA", color = "#40e0d0") #curva ORIGINAL
ax.plot(Y, DA_X, label = "DA_X", color = "#40a0e0", linestyle = 'dashed') #NUEVA curva
ax.plot(Y, L_45, color = "#404040") #línea de 45º

# Lineas punteadas
plt.axvline(x = 69.2, ymin= 0, ymax = 0.68, linestyle = ":", color = "grey")
plt.axhline(y = 173.2, xmin= 0, xmax = 0.68, linestyle = ":", color = "grey")
plt.axvline(x = 63,  ymin= 0, ymax = 0.62, linestyle = ":", color = "grey")
plt.axhline(y = 157, xmin= 0, xmax = 0.62, linestyle = ":", color = "grey")

# Texto agregado
plt.text(0, 180, '$DA^e$', fontsize = 11.5, color = 'blue')
plt.text(0, 125, '$DA_X$', fontsize = 11.5, color = '#40a0e0')
plt.text(6, 4, '$45°$', fontsize = 11.5, color = 'black')
plt.text(2.5, -3, '$◝$', fontsize = 30, color = '#404040')
plt.text(72, 0, '$Y^e$', fontsize = 12, color = 'blue')
plt.text(56, 0, '$Y_X$', fontsize = 12, color = '#40a0e0')
plt.text(64, 100, '$←$', fontsize = 18, color = 'orange')
plt.text(20, 157, '$↓$', fontsize = 18, color = 'orange')

# Título y leyenda
ax.set(title = "Reducción de las exportaciones $(X_0)$", xlabel = r'Y', ylabel = r'DA')
ax.legend()

plt.show()


# In[ ]:




